\documentclass[hidelinks,a4paper,14pt]{article}
\usepackage{ amsmath, amssymb}
\usepackage{graphicx}
\usepackage{color,amsmath,graphics,graphicx}
\usepackage{amsfonts}
\usepackage{mathrsfs,hyperref}
\usepackage{latexsym,amsmath,enumerate,amsbsy,amsthm}
\textwidth = 415pt

%==============================================
\usepackage{fontspec}
\usepackage{xunicode}
\usepackage{xltxtra}
\defaultfontfeatures{Scale=1.23}
\XeTeXlinebreaklocale “th_TH” % สำหรับตัดคำ
\setmainfont[Scale=1.23]{TH SarabunPSK}
%==============================================
%%%%%%%%%%%%%%% THEOREM Environments %%%%%%%%%% 
\newtheorem{theorem}{ทฤษฎีบท}[section]						%
\newtheorem{lemma}[theorem]{บทตั้ง}						%
\newtheorem{conjecture}[theorem]{บทคาดการณ์}				%
\newtheorem{definition}[theorem]{บทนิยาม}					%
\newtheorem{remark}[theorem]{หมายเหตุ}						%
\newtheorem{proposition}[theorem]{ประพจน์}					%
\newtheorem{corollary}[theorem]{บทแทรก}					%
\numberwithin{equation}{section}							%
\newtheorem{example}[theorem]{ตัวอย่าง}						%
%\newtheorem{exercise}{แบบฝึกหัด}[chapter]	
%\renewcommand{\chaptername}{บทที่}
\renewcommand\tablename{ตารางที่}
\renewcommand\figurename{รูปที่}
\renewcommand{\contentsname}{สารบัญ}						%
%\renewcommand{\bibname}{บรรณานุกรม}						% 
\renewcommand{\indexname}{ดรรชนี}					%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% addition mod
\usepackage{subcaption,float,framed,algorithm2e,hyperref}
%%%%


\begin{document}
	{\begin{center}
			\textbf{Project Proposal}\\
			\vspace{0.5cm}
			\textbf{Division of Applied Mathematics, Department of Mathematics}\\
			\vspace{0.5cm}
			\textbf{Faculty of Science, Silpakorn University}
		\end{center}}
		{
			\vspace{0.5cm}
			\flushleft{Date : { 27 กันยายน 2561 } \hfill{ }}
			\flushleft{Advisor : {  ผู้ช่วยศาสตราจารย์ ดร. นพดล  ชุมชอบ}}\\
			\flushleft{Student : { นายภัคพล       พงษ์ทวี     รหัส  07580028}\\
			\vspace{1cm}
		}
		
		
		% Here the project title
		{\textbf{\begin{flushleft}Project Title : ขั้นตอนวิธีเชิงตัวเลขชนิดใหม่สำหรับการซ่อมแซมภาพที่ใช้การแปรผันรวมกับการประยุกต์สำหรับซ่อมแซมภาพวาดศิลปะไทยและการลบบทบรรยายจากอนิเมะ \\
				(A new numerical algorithm for TV-based image restoration with its applications in restoring Thai painting images and removing subtitles from animes)
			\end{flushleft}
		}}
		\thispagestyle{empty}
	\section{Introduction}
	\setlength\parindent{24pt}\hspace{\parindent} %addition mod: Tab
	
	%ความสำคัญของการประมวลผลภาพ 1 ย่อหน้า (General Idea) ถูกนำไปใช้อะไรบ้าง 
	
%	Image Inpainting เป็น area หนึ่งของ processing คืออะไร ไปใช้ที่ไหน อยู่ส่วนไหนของ processing  เขาใช้ในทางไหนบ้าง
	
	%บอกว่าสนใจใช้การแปรผันเพราะ.... เขียน R ลอยๆ ว่าจะใช้ Total Variation
	
%	พูด formulation inpainting ในทางคณิตสาสตร์ review โมเดลภาพธรรมดา ภาพขาวดำ 1 section สี 1 section วิดีโอ 1 section
	
	%บอก contribution จะทำอะไร พัฒนาวิธีการ สำหรับอะไร 
	
%	ม่ีเรื่องราวของ art conversation การประยุกต์ อนุรักษ์ศิลปะ ถูกทำมาแล้วโดยใคร ยกตัวอย่างในไทย %มีศิลปะไทยที่สามารถนำตรงนี้ไปประยุกต์ใช้ได้
	
%	ยกปัญหาเรื่องอนิเมะชั่น ยกเว็บที่เขาเคยทำมาแล้ว
	
%		บอกผู้ใช้ต้อง detect โดเมนเอง แต่บอกว่าอนิเมะเรา design สำหรับอนิเมะ
%	ความท้าทาย 
%	-แม่นยำ
%	-เร็ว
	
%	อนิเมะ หมายถึง....
	
%	มีภาพก่อนการเติมข้อมูลภาพ หลังจากเติมข้อมูลภาพ ด้วย OpenCV / ด้วย Total Variation ตัวคณิตศาสตร์จะอยู่ใรการ review และการสร้างใน 3 section 
	
	%ยังไม่ได้ review ตัว splitbergman เรื่อง timemarching แล้วมีปัญหา เรื่องเข้่สีจะ based on split bergman 
	
%	-------------------------------------
	
	%ความสำคัญของการประมวลผลภาพ 1 ย่อหน้า (General Idea) ถูกนำไปใช้อะไรบ้าง 
	ภาพดิจิตัล (digital images)  คือภาพที่นิยมใช้กันอย่างแพร่หลายในปัจจุบันอาจจะใช้ถูกสร้างได้หลายวิธีทั้งการใช้กล้องถ่ายภาพเพื่อให้ได้ภาพ หรืออาจจะใช้อุปกรณ์ทางการแพทย์ต่างๆ จนไปถึงการใช้คลื่นที่มองไม่เห็นเพื่อถ่ายภาพดาราจักรต่างๆ ในอวกาศ  ซึ่งภาพที่ได้ออกมานั้นมักจะผ่านการประมวลการประมวลผลอยู่เสมอ ตัวอย่างเช่น ภาพถ่ายพื้นผิวดวงจันทร์เมื่อส่งสัญญาณกลับมาจากดาวเทียมจะมีสัญญาณรบกวนเข้ามาแทรก จึงจำเป็นที่จะต้องผ่านการกำจัดสัญญาณรบกวนออกจากภาพ (images denoising) การติดตามอาการคนไข้ที่มีอาการเนื้องอกจะเป็นต้องทำการลงทะเบียนภาพ (Image Registeration) เพื่อให้แพทย์สามารถติดตามการเปลี่ยนแปลงของเนื้องอกได้ การติดตามรถที่กระทำผิดกฏจราจร จำเป็นต้องแยกรถยนตร์ออกจากพื้นหลังโดยใช้การแบ่งส่วนภาพ (Image Segmentation) และการลบวัตถุที่ไม่ต้องการออกไปจากภาพจะใช้การซ่อมแซมภาพ (Image Inpainting) เป็นต้น 
	
	%	Image Inpainting เป็น area หนึ่งของ processing คืออะไร ไปใช้ที่ไหน อยู่ส่วนไหนของ processing  เขาใช้ในทางไหนบ้าง
	
	การซ่อมแซมภาพ คือเป็นหนึ่งในกระบวนการประมวลผลภาพที่จะเติมเต็มข้อมูลที่หายไปในพื้นที่ภาพที่กำหนด โดยมีจุดประสงค์เพื่อซ่อมแซมภาพที่เสียหาย โดยพื้นที่ภาพส่วนนั้นไม่สามารถพบได้จากการสังเกต โดยการกู้คืน สี, โครงสร้าง และพื้นผิว ที่เกิดการเสียหายเป็นวงกว้าง พิกเซลที่จะนำมาใช้ซ่อมแซมจะถูกคำนวณขึ้นมาใหม่จากข้อมูลที่พิกเซลที่อยู่โดยรอบที่ยังไม่เสียหาย \cite{ref:defination-of-inpaint}  ซึ่งใช้ลบสิ่งที่ไม่ต้องการออกจากภาพ ปัจจุบันมักเห็นได้ตามแอปพลิเคชันหน้าใส ที่ช่วยลบริ้วรอยที่ไม่ต้องการออกจากใบหน้า
	
		%บอกว่าสนใจใช้การแปรผันเพราะ.... เขียน R ลอยๆ ว่าจะใช้ Total Variation
		
		ซึ่งการซ่อมแซมรูปภาพมีวิธีการทางคณิตศาสตร์ที่ใช้แตกต่างกันไปจำนวนมาก แต่การซ่อมแซมด้วยการแปรผันจะสนใจที่ความต่อเนื่องของโครงสร้างทางเรขาคณิต ซึ่งวิธีการซ่อมแซมรูปภาพด้วยการแปรผันมักจะให้ผลลัพธ์ได้ดีกับพื้นที่แคบและเล็ก ในรูปภาพที่ราบเรียบเป็นช่วง (piecewise smooth image) หรือที่เรียกกันว่าภาพการ์ตูน เนื่องจากวิธีการนี้ไม่สามารถทำการสร้างพื้นผิว (Texture) ขึ้นมาได้ \cite{ref:defination-of-variation-inpaint} โดยวิธีการแปรผันที่สนใจ จะใช้ตัวแบบ   Rudin-Osher-Fatemi (ROF) \cite{ref:ROF-template}ซึ่งถูกนำเสนอในรูปเชิงแปรผัน  (variational formulation) ไว้ดังนี้ 
		
		$$\min_{u} \{ \mathcal{J}(u)= \lambda \mathcal{D}(u,f)+  \mathcal{R}(u) \}$$

		เมื่อ $\mathcal{D}$ คือ พจน์สำหรับวัดค่าความเหมาะสมข้อมูล (Data fitting Term) $\lambda$ คือ ตัวแปรจัดระเบียบ (Regularization parameter)  $\mathcal{R}$ พจน์จัดระเบียบ (Regularization Term) 
		
		ซึ่งตัวแบบ ROF พจน์สำหรับวัดค่าความเหมาะสมข้อมูลได้หลายวิธี ซึ่งผู้ศึกษาสนใจที่จะใช้วิธีแปรผันรวม (Total Variation) \cite{ref:splitbergman-denoise} ในการแก้ตัวแบบนี้	 โดยเป็นการแก้ปัญหาการแปรผันมีขอบเขต (bounded variation หรือ BV) ทั้งหมดโดยที่ภาพ $u$ อยู่ใน $BV(\Omega)$ เมื่อสามารถหาปริพันธ์ได้และจะมี Radon measure $Du$ ซึ่ง 
		
		$$\int_{\Omega}u(x) div \vec{g}(x) dx = \int_{\Omega} \left\langle\vec{g},Du(x) \right\rangle\hspace{1cm}\forall\vec{g} \in C_c^1(\Omega,\mathbb{R}^2)^2$$
		
		และจาก $Du$ เป็น distributional gradient ของ $u$ เมื่อ $u$ ราบเรียบแล้ว  $Du(x)= \bigtriangledown u(x)dx $
		โดย total variation seminorm ของ $u$ คือ 
		
		$$ ||u||_{TV(\Omega)} := \int_{\Omega} | Du | := sup{ \left \{ \int_{\Omega}  u \ div  \ \vec{g} \ dx \  : \vec{g} \  \in C_c^1(\Omega,\mathbb{R}^2)^2 \ , \ \sqrt{g_1^2+g_2^2} \leq 1 \right \} }  $$
		
		จาก $u$ ราบเรียบแล้ว การแปรผันรวมสมมูลกับอินทิกรัลของขนาดเกรเดียนท์ 
		
		$$ ||u||_{TV(\Omega)} = \int_{\Omega} | \bigtriangledown u | dx$$
		
		จึงได้ว่าจะหาฟังก์ชันแปรผันมีขอบเขต $u$ หาได้จาก minimization problem
		
		$$ \underset{u \in BV(\Omega)}{arg \ min} ||u||_{TV(\Omega)} + \frac{\lambda}{2} \int_{\Omega \textbackslash D} (f(x) - u(x))^2 dx$$
		
		เมื่อ $\lambda$ มีค่าบวก ปัญหา minimalization นี้จะเหมือนกับปัญหาการลบสิ่งรบกวนของ Rudin, Osher และ Fatemi เพียงแต่ปริพันธ์ลำดับอยู่บน $\Omega-D$  แทนที่จะเป็น $\Omega$ ถ้าผลลัพธ์ที่แม่นตรงอยู่ใน $BV$ และมีค่าอยู่ในช่วง $[0,1]$ แล้วจะมี minimizer u แต่มักจะไม่มีเพียงหนึ่งเดียว 
		
		การซ่อมแซมรูปภาพอาจมองเป็นลักษณะการลบสิ่งรบกวนที่มี spatially-varying regularization strength เป็น $\lambda(x)$ ทำให้ได้ว่า
		
		$$\underset{u}{{arg \ min}} ||u||_{TV(\Omega)} + \frac{1}{2} \int_{\Omega} \lambda(x)(f(x) - u(x))^2 dx$$
		
		โดยที่ $\lambda(x)$ จะมีค่าเป็น $0$ เมื่ออยู่ใน $D$ และ $\lambda(x)>0$ เมื่ออยู่นอก $D$  ทำให้เมื่อ $x \in D$ ที่ $\lambda(x)=0$ ค่า $f(x)$ จะไม่ถูกใช้ ทำให้ $u(x)$ ได้รับผลจาก $||u||_{tv}$ เท่านั้น ส่วนที่ด้านนอก $D$ จะเป็น TV-regularize denoising พฤติกรรมลดสิ่งลบกวนนี้อาจเป็นที่น่าพอใจเมื่อยากที่จะระบุโดเมนที่ต้องซ่อมแซมได้อย่างถูกต้อง และเมื่อใช้ $λ$ ขนาดใหญ่จะทำให้การลดสิ่งรบกวนมีผลน้อยมากจนทำให้พื้นที่นอก $D$  แทบไม่เปลี่ยนแปลง
		
		จากโมเดลทางคณิตศาสตร์ที่ได้กล่าวมาข้างต้น จะสามารถใช้วิธีการทางเชิงตัวเลขสำหรับการซ่อมแซมรูปภาพโดยใช้ความแปรปรวนทั้งหมดได้หลายวิธีการ จึงขอยกตัวอย่างวิธีการไทม์มาร์ชชิ่ง (time marching method) \cite{ref:ExplicitTimeMarching}  ป็นวิธีการที่ง่ายและสะดวกในการแก้สมการเชิงอนุพันธ์ย่อยไม่เป็นเชิงเส้น
		แนวคิดของวิธีการนี้คือการแนะนําตัวแปรเวลาสังเคราะห์ (time artificial variable) จากนั้นหาคําตอบแบบสภาวะคงตัว (steady-state solution) ของสมการเชิงอนุพันธ์ย่อยไม่เป็นเชิงเส้นที่ขึ้นอยู่กับเวลา และเพื่อจะแก้ความไม่เป็นเชิงเส้นของสมการเชิงอนุพันธ์ย่อย จะสามารถใช้รูปแบบที่ชัดแจ้งของออยเลอร์ (Euler's explicit scheme) ที่กำหนดโดย
		$$
		u(\mathbf{x},t_{k+1})=u(\mathbf{x},t_{k})+\tau\left(\nabla\cdot\left(\frac{\nabla u ( \mathbf{x},t_k)}{\lvert \nabla u ( \mathbf{x},t_k) \rvert }\right) + \lambda(u ( \mathbf{x},t_k)-f(\mathbf{x})) \right)
		$$
		เมื่อ $\tau>0$ แทนขั้นเวลา (time step) ที่ได้จากการดิสครีตไทซ์โดเมนเวลา $[0,\infty)$
		
		หลังจากใช้การประมาณแบบไฟไนต์ดิฟเฟอเรนซ์ จะได้รูปแบบการทำซ้ำเป็น
		
		$$ (u^{[k+1]})_{i,j} = (u^{[k]})_{i,j}+\tau\left(  \mathcal{K}(u^{[k]})_{i,j}+\lambda((u^{[k]})_{i,j}+(f)_{i,j})\right) $$
		
		เห็นได้ว่าวิธีการเชิงตัวเลขดังกล่าวข้างต้นนั้นง่ายในการคํานวณ แต่การลู่เข้าสู่คําตอบที่เหมาะสมของปัญหา เชิงแปรผันค่อนข้างช้ามากเนื่องจากต้องใช้ $\tau$ ที่มีขนาดเล็กในการทำให้ลำดับของคำตอบลู่เข้า 
	
		เนื่องจากวิธีไทม์มาร์ชชิ่งการลู่เข้าของคำตอบค่อนข้างช้า จึงมีอีกวิธีที่สามารถลู่เข้าสู่คำตอบได้ไวขึ้น  นั่นคือวิธี Split Bergman \cite{ref:splitbergman-inpaint} ซึ่งคือการแยกส่วนการดำเนินการ (splitting) และการทำซ้ำ bergman (bergman iteration)
		
		จากความแปรปรวนทั้งหมดสามารถประมาณได้โดย $ |\bigtriangledown u_{i,j} | $ บนทุกพิกเซลนั่นคือ
		
		$$ ||u||_{TV(\Omega)} \approx \sum_{i=0}^{N-1} \sum_{j=0}^{N-1} |\bigtriangledown u_{i,j}| $$
		
		เมื่อ $\bigtriangledown u_{i,j}$  คือ discrete gradient วิธี split bergman  จะนำมาใช้เพื่อแก้ minimization problem 
		$$
		\left\{ \begin{array}{lc} 
		\underset{d , u}{arg \ min}\sum_{i,j}|d_{i,j}|+\frac{1}{2}\sum_{i,j}\lambda_{i,j}(f_{i,j} - u_{i,j})^2 \\
		subject \ to \ d = \bigtriangledown u 
		\end{array} \right .
		$$
		
		โดยตัวแปรช่วย $d$  คือเวคเตอร์ที่บีบบังคับ $ \bigtriangledown u$ และใช้วิธีการทำซ้ำ bergman เพื่อแก้ปัญหาค่าเหมาะสมแบบมีข้อจำกัด ซึ่งในแต่ละการทำซ้ำ bergman จะเป็นการแก้
		
		$$\underset{d , u}{arg \ min}\sum_{i,j}|d_{i,j}|+\frac{\lambda}{2}\sum_{i,j}\lambda_{i,j}(f_{i,j} - u_{i,j})^2 + \frac{\gamma}{2} \sum_{i,j} |d_{i,j} - \bigtriangledown u_{i,j}- b_{i,j}|^2 $$
		
		เมื่อ $b$  เป็นตัวแปรของวิธีการทำซ้ำ bergman และ $\gamma$ เป็นค่าคงที่บวกใดๆ โดยการ minimization  บน $d$ และ $u$  จะแก้โดย alternative direction method โดยแต่ละขั้นของการหาค่าต่ำสุด ตัวแปร $d$ และ $u$ จะให้ตัวแปรอื่นคงค่าไว้
		
		d subproblem เมื่อเราคงค่า u ไว้ จะได้ว่า d subproblem คือ
		
		$$ \underset{d}{arg \ min} \sum_{i,j} |d_{i,j}| + \frac{\gamma}{2} \sum_{i,j}|d_{i,j} - \bigtriangledown u_{i,j} - b_{i,j}|^2$$
		
		โดยปัญหานี้เมื่อทำการแก้แล้วจะได้ว่า 
		
		$$ d_{i,j} = \frac{\bigtriangledown u_{i,j}  + b_{i,j} }{ | \bigtriangledown u_{i,j}  + b_{i,j} | } max \{  | \bigtriangledown u_{i,j}  + b_{i,j} | - \frac{1}{\gamma} , 0\} $$
		
		u subproblem เมื่อเราคงค่า $d$ ไว้ จะได้ว่า u subproblem คือ
		
		$$ \underset{u}{arg \ min} \frac{1}{2} \sum_{i,j} \lambda_{i,j}  (f_{i,j} - u_{i,j})^2 + \frac{\gamma}{2} \sum_{i,j} |d_{i,j} - \bigtriangledown u_{i,j} - b_{i,j}|^2$$
		
		เมื่อแก้แล้วจะได้ว่า
		
		$$ \frac{1}{\gamma} - \bigtriangleup u = \frac{1}{\gamma} \lambda f - div (d-b)$$
		
		โดยที่ $div$ คือ discrete divergence และ $\bigtriangledown u$ คือ discrete lapacian เราจะประมาณคำตอบนี้โดยการใช้ หนึ่งรอบ Gauss-seidel ต่อหนึ่งรอบการทำซ้ำของ Bergman ซึ่ง subproblem จะถูกแก้หนึ่งครั้ง ต่อหนึ่งรอบ bergman iteration แต่ทั้งนี้การทำซ้ำ Gauss-seidel หลายครั้ง จะทำให้การแก้ subproblem มีความแม่นยำขึ้น
		ส่วนตัวแปรช่วย $b$ มีค่าเริ่มต้นเป็น 0 จากนั้นทำการปรับค่าโดย
		
		$$ b^{k+1} = b^k  + \bigtriangledown u - d $$
		
		โดยที่ความเกี่ยวข้องกันของแต่ละพื้นที่จะแรงขึ้นเมื่อ $\gamma$ ใหญ่ขึ้น ดังนั้น $\gamma$ ไม่ควรเล็กหรือใหญ่จนเกินไป จะทำให้ทั้งสอง subproblem ลู่เข้าได้ดี
		จึงได้ว่าวิธีการในภาพรวมเป็นดังนี้
		
		
		
		\begin{algorithm}[H]
			\begin{framed}
				initialization $u = 0, d = 0, b = 0$\\
				\While{ $|| u_{cur} - u_{prev} ||_2 > Tol$}{
					Solve the $d$ subproblem \\
					Solve the $u$ subproblem \\
					$ b = b + \bigtriangledown u - d$
				}
			\end{framed}
		\end{algorithm}
		
		
		
		โดยการทำซ้ำนี้จะกระทำจนกระทั่ง นอร์ม L2 ระหว่างรอบปัจจุบันต่างกับรอบก่อนหน้าไม่เกินค่า Tol ที่กำหนดไว้หรือจำนวนรอบการทำซ้ำมากจนถึงจุดสิ้นสุดที่เพียงพอที่จะให้ลู่เข้าซึ่งไม่ควรใหญ่เกินไปเพื่อไม่ให้เสียเวลาประมวลผลจนนานเกินไป 
	
		
		%	พูด formulation inpainting ในทางคณิตสาสตร์ review โมเดลภาพธรรมดา ภาพขาวดำ 1 section สี 1 section วิดีโอ 1 section 
		
		ซึ่งวิธีเชิงตัวเลขข้างต้นเป็นวิธีการสำหรับภาพเฉดเทา (Gray-scale) สำหรับการประยุกต์ใช้กับภาพสีนั้น ภาพสี จะประกอบขึ้นด้วยสี  3 สี คือ แดง เขียว น้ำเงิน ซึ่งเราสามารถใช้วิธีเชิงตัวเลขข้างต้น แยกสำหรับแต่ละสี เพื่อทำการซ่อมแซมภาพก่อนจะนำมารวมกลับเป็นภาพสีอีกครั้ง และสำหรับวิดีโอนั้นประกอบด้วยภาพจำนวนหลายภาพต่อหนึ่งหน่วยเวลา เราจะเรียกภาพหนึ่งภาพในวิดีโอว่า เฟรม (frame) ซึ่งเฟรมนี้เป็นภาพสี เราจึงสามารถแบ่งใช้โมเดลกับแต่ละสีและรวมกันกับมาเป็นวิดีโออีกครั้งได้ จึงสามารถซ่อมแซมวิดีโอได้ด้วย
	
		%บอก contribution จะทำอะไร พัฒนาวิธีการ สำหรับอะไร 
		
		ผู้พัฒนาจึงสนใจที่จะพัฒนาวิธีการเชิงตัวเลขเพื่อให้สามารถซ่อมแซมได้รวดเร็วยิ่งขึ้น เนื่องจากหากต้องการซ่อมแซมวิดีโอแบบเรียลไทม์ จะเป็นจะต้องสามารถซ่อมแซมได้เร็วถึง 25 ภาพต่อวินาที ซึ่งแต่ละภาพเป็นภาพสี ซึ่งวิธีการ Split Bergman หากทำให้ได้คุณภาพดีจะใช้เวลาที่นานขึ้น และหากทำให้เวลาทันสำหรับ 25 ภาพต่อวินาที ในแต่ละภาพจะยังไม่ถูกซ่อมแซม
		
		%	ม่ีเรื่องราวของ art conversation การประยุกต์ อนุรักษ์ศิลปะ ถูกทำมาแล้วโดยใคร ยกตัวอย่างในไทย (*ยังหาไม่ได้)
		
		 %มีศิลปะไทยที่สามารถนำตรงนี้ไปประยุกต์ใช้ได้
		
		ซึ่งวิธีการซ่อมแซมภาพด้วยการแปรผันรวมนั้น ใช้ในการซ่อมแซมภาพที่ราบเรียบเป็นช่วง โดยภาพจิตรกรรมฝาผนังนั้น เป็นหนึ่งในภาพที่ราบเรียบเป็นช่วง จึงเหมาะสมที่จะใช้วิธีการนี้ในการซ่อมแซม และเมื่อพัฒนาให้สามารถซ่อมแซมวิดีโอแบบเรียลไทม์ได้ อาจพัฒนาต่อยอดเป็นเทคโนโลยี augmented reality ที่สามารถยกโทรศัพท์มือถือขึ้นมาส่องยังภาพวาดฝาผนังที่ได้รับความเสียหายและแสดงภาพที่ถูกซ่อมแซมแล้วบนหน้าจอได้อย่างทันที
		
		%	ยกปัญหาเรื่องอนิเมะชั่น ยกเว็บที่เขาเคยทำมาแล้ว
		
		%		บอกผู้ใช้ต้อง detect โดเมนเอง แต่บอกว่าอนิเมะเรา design สำหรับอนิเมะ
		%	ความท้าทาย 
		%	-แม่นยำ
		%	-เร็ว
		การจะซ่อมแซมภาพได้นั้น จำเป็นจะต้องมีการหาโดเมนซ่อมแซม (Inpaint Domain) ซึ่งสำหรับในการศึกษาครั้งนี้ ซึ่งโดยทั่วไป มักจะต้องให้ผู้ที่ใช้งานหาโดเมนซ่อมแซมเอง แต่โครงการวิจัยชิ้นนี้นอกจากจะสร้างวิธิการเชิงตัวเลขในการซ่อมแซมภาพแล้ว ยังได้เสนอวิธีการหาวิธีการหาบทบรรยายในวิดีโอแบบอนิเมะไว้อีกด้วย เพื่อทำให้การค้นหาโดเมนซ่อมแซมสำหรับไฟล์วิดีโอแบบอนิเมะเป็นไปได้อย่างอัตโนมัติ
		
		โดยบทบรรยายของอนิเมะนั้น มักจะขึ้นบริเวณด้านล่างของหน้าจอ และนอกจากนี้ บทบรรยายอนิเมะมักจะใช้ขอบของตัวอักษรเป็นสีดำอีกด้วย ด้วยสมบัตินี้เองทำให้เราสามารถหาบริเวณบนเฟรมที่เป็นบทบรรยายได้โดยจะมีวิธีหาพื้นที่ซึ่งเป็นบทบรรยายดังนี้
		
		\begin{figure}[H]
			\begin{subfigure}{0.4\linewidth}
				\centering
				\includegraphics[width=0.4\linewidth]{images/detection-original.png}
				\caption{ภาพเฟรมอนิเมะที่มีบทบรรยาย}
			\end{subfigure}
			\begin{subfigure}{0.4\linewidth}
				\centering
				\includegraphics[width=0.4\linewidth]{images/detection-threshold.png}
				\caption{ภาพหลังทำการตัดส่วนล่างและ thresholding}
			\end{subfigure}
		\end{figure}
		
		ตัดเฟรมมาเฉพาะส่วนล่างของเฟรมที่น่าจะมีบทบรรยายปรากฏอยู่ จากนั้นทำการ thresholding เพื่อหาบริเวณที่เป็นสีดำเนื่องจากบทบรรยายจะถูกล้อมรอบด้วยสีดำเสมอ
		
		\begin{figure}[H]
			\begin{subfigure}{0.4\linewidth}
				\centering
				\includegraphics[width=0.4\linewidth]{images/detection-inverse.png}
				\caption{ภาพหลังทำการสลับสีี}
			\end{subfigure}
			\begin{subfigure}{0.4\linewidth}
				\centering
				\includegraphics[width=0.4\linewidth]{images/detection-blackfill.png}
				\caption{ภาพหลังทำการเปลี่ยนพื้นที่สีขาว}
			\end{subfigure}
		\end{figure}
		
		ทำการสลับสีระหว่างสีดำกับสีขาวของภาพที่ทำการ thresholding หลังจากนั้นทำการเปลี่ยนพื้นที่สีขาวซึ่งติดกับขอบของเฟรมทั้งหมดให้เป็นสีดำ เพราะว่า บทบรรยายไม่อยู่ติดกับหน้าจอ เราจะถือว่าสิ่งที่อยู่ติดกับหน้าจอไม่ใช่บทบรรยาย
		
		\begin{figure}[H]
			\begin{subfigure}{0.4\linewidth}
				\centering
				\includegraphics[width=0.4\linewidth]{images/detection-erode-opening.png}
				\caption{ภาพหลังการ erode และ opening}
			\end{subfigure}
			\begin{subfigure}{0.4\linewidth}
				\centering
				\includegraphics[width=0.4\linewidth]{images/detection-stoke.png}
				\caption{ภาพหลังการ dilate}
			\end{subfigure}
		\end{figure}
		
		จากนั้นนำวัตถุที่มีขนาดเล็กเกินไป หรือใหญ่เกินไปออกจากภาพด้วยวิธีการ erode และ opening
		จะได้ว่าส่วนที่เหลือเป็นสีขาวในภาพคือบทบรรยาย แต่ว่าขอบของบทบรรยายก็ต้องถูกลบออกไปด้วย จึงทำการ dilate เพื่อขยายขอบของบทบรรยายให้เท่ากับบทบรรยายที่อยู่ในเฟรมวิดีโอ และสิ่งที่เหลืออยู่คือโดเมนซ่อมแซม ที่จะนำไปใช้ในการซ่อมแซมภาพต่อไป
		
		% ====================================
\section{Objective}
วัตถุประสงค์ของโครงการวิจัยมีดังต่อไปนี้
\begin{description}
	\item[(1)]	 ศึกษาวิธีการแปรผันและวิธีการเชิงตัวเลขที่มีประสิทธิภาพเพื่อเติมข้อมูลที่ขาดหายในภาพหรือวิดีโอ
	\item[(2)] สร้างวิธีการเชิงตัวเลขใหม่สำหรับซ่อมแซมภาพศิลปะไทยและลบบทบรรยายออกจากอนิเมะ
	\item[(3)] นำวิธีการที่สร้างขึ้นเพื่อซ่อมแซมภาพไทย และลบบทบรรยายอนิเมะ	 
\end{description}

\section{Scope of Study}
ขอบเขตของโครงงานมีดังต่อไปนี้
\begin{description}
\item[(3.1)] ภาพศิลปะที่ใช้ศึกษา เป็นภาพจิตรกรรมฝาผนังไทย ที่อยู่ภายใต้เว็บ Wikipedia.org ซึ่งได้รับการอนุญาตให้ใช้งานแบบ Creative Commons หรือแบบ Public Domain
\item[(3.2)] วิดีโอที่ใช้ศึกษาเป็นวิดีโอประเภทอนิเมะ โดยศึกษากับไฟล์อนิเมะที่ใช้ Color space แบบ RGB เท่านั้น
\item[(3.3)] บทบรรยายที่ใช้ทดสอบ จะถูกล้อมรอบไว้ด้วยสีดำ ขนาดความหนาขนาดไม่น้อยกว่า 5 พิกเซล
\item[(3.4)] วิดีโอที่ใช้ศึกษาขนาดไม่เกิน 1920x1080
\item[(3.5)] คอมพิวเตอร์ที่ใช้ทดลองใช้หน่วยประมวลผล I7-6700HQ ใช้การ์ดจอ Nvidia GTX 960M แรม 16GB ฮาร์ดดิกส์แบบ SSD
\end{description}

\section{Methodology}
วิธีการมีดังต่อไปนี้
\begin{description}
	\item[(4.1)] ศึกษาการคณิตศาสตร์ต่อเติมข้อมูลที่ขาดหายบนรูปภาพ
	\item[(4.2)] พัฒนาวิธีการเชิงตัวเลขสำหรับการซ่อมแซมรูปภาพ
	\item[(4.3)] ทดสอบวิธีการเชิงตัวเลขที่พัฒนาขึ้นโดยโปรแกรมคอมพิวเตอร์บนภาพสังเคราะห์
	\item[(4.4)] อภิปรายผลที่ได้จากการทดลองเชิงตัวเลข
	\item[(4.5)] สรุปผลการดำเนินงานวิจัยและจัดทำรูปเล่มฉบับสมบูรณ์
\end{description}
\section{Time Periods}
แผนการดำเนินงานตลอดทั้งโครงการสามารถสรุปได้โดยย่อจากตารางต่อไปนี้
\begin{center}
	\begin{tabular}[ht]{|l|c|c|c|c|c|c|c|c|c|c|c|c|}
		\hline
		&\multicolumn{12}{c|}{เดือนที่}\\
		\cline{2-13}
		แผนการดำเนินงาน&1&2&3&4&5&6&7&8&9&10&11&12\\
		\hline
		ศึกษาการคณิตศาสตร์ต่อเติมข้อมูลที่ขาดหายบนรูปภาพ&x&x& & & & & & & & & &\\
		พัฒนาวิธีการเชิงตัวเลขสำหรับการซ่อมแซมรูปภาพ& & &x&x& & & & & & & &\\
		ทดสอบวิธีการเชิงตัวเลขที่พัฒนาขึ้นโดยโปรแกรมคอมพิวเตอร์บนภาพสังเคราะห์& & & & &x&x& & & & & &\\
		อภิปรายผลที่ได้จากการทดลองเชิงตัวเลข & & & & & & &x&x& & & &\\
		สรุปผลการดำเนินงานวิจัยและจัดทำรูปเล่มฉบับสมบูรณ์& & & & & & & & &x&x&x&x\\
		\hline
	\end{tabular}
\end{center}




\section{References}

\renewcommand{\section}[2]{} % addition mod: remove reference text
\begin{thebibliography}{}
	\bibitem{ref:defination-of-inpaint} 
	Furht B., อ้างอิง 2561: Encyclopedia of Multimedia [จาก \url{https://doi.org/10.1007/0-387-30038-4_98}] สืบค้นเมื่อ 5 สิงหาคม 2561
	
	\bibitem{ref:defination-of-variation-inpaint}
	Işık Barış Fidaner, อ้างอิง 2561: A Survey on Variational Image Inpainting , Texture Synthesis and Image Completion [จาก \url{https://www.semanticscholar.org/paper/_/36f4d32ce45f72091510ab4d4d1cc3bf81ffe879}] สืบค้นเมื่อ 5 สิงหาคม 2561
	
	\bibitem{ref:ROF-template} 
	Leonid I.Rudin และคณะ., อ้างอิง 2561: Nonlinear total variation based noise removal algorithms [จาก \url{https://doi.org/10.1016/0167-2789(92)90242-F}] สืบค้นเมื่อ 10 กันยายน 2561
	
	\bibitem{ref:ExplicitTimeMarching} 
	A. Marquina และ S. Osher, อ้างอิง 2561: Explicit algorithms for a new time dependent model based on level set motion for nonlinear deblurring and noise removal [จาก \url{https://doi.org/10.1137/S1064827599351751}] สืบค้นเมื่อ 10 กันยายน 2561
	
	\bibitem{ref:splitbergman-denoise}
	Pascal Getreuer, อ้างอิง 2561:  Rudin-Osher-Fatemi Total Variation Denoising using Split Bregman , [จาก \url{https://doi.org/10.5201/ipol.2012.g-tvd}] สืบค้นเมื่อ 5 สิงหาคม 2561
	
	\bibitem{ref:splitbergman-inpaint}
	Pascal Getreuer, อ้างอิง 2561:  Total Variation Inpainting using Split Bregman [จาก \url{https://doi.org/10.5201/ipol.2012.g-tvi}] สืบค้นเมื่อ 5 สิงหาคม 2561
	
\end{thebibliography}


\end{document}
	
	
	
	